clear
clc
p=750;
w=[-10.021,-21.096,-37.986,-9.846,-28.653,-18.918,-28.032,-14.640,-30.594,-26.111];

func= @(x) (x(1)*(w(1)+log(p)+log((x(1)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(2)*(w(2)+log(p)+log((x(2)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(3)*(w(3)+log(p)+log((x(3)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(4)*(w(4)+log(p)+log((x(4)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(5)*(w(5)+log(p)+log((x(5)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(6)*(w(6)+log(p)+log((x(6)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(7)*(w(7)+log(p)+log((x(7)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(8)*(w(8)+log(p)+log((x(8)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(9)*(w(9)+log(p)+log((x(9)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))))+(x(10)*(w(10)+log(p)+log((x(10)/(x(1)+x(2)+x(3)+x(4)+x(5)+x(6)+x(7)+x(8)+x(9)+x(10))))));

Aeq=[1 2 2 0 0 1 0 0 0 1;0 0 0 1 2 1 1 0 0 0;0 0 1 0 0 0 1 1 2 1]; beq=[2;1;1];
lb=[]; ub=[]; 
A=[]; b=[];
nonlcon=[];options=[];
x0=[0.05 0.05 0.2 1 1 0.6 1 1 1 0.8];
[x,fval,exitflag]=fmincon(func,x0,A,b,Aeq,beq,lb,ub,nonlcon,options)
x
